<!DOCTYPE HTML>
<html>
 <head>
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" >
  <meta />

  <title>Search Engine</title>
 </head>
 <body>
    <b>Search engine created by Sergey Rudenko as a test task for Digicode company.
      Please input word in field below, to try find some text.
    </b>
  <div id = "elem">
  <p><b>Text to search:</b><br>
   <input type="text" class="text" size="40">   <input type="submit" class="send" value="Send to server">
  </p>
 </div>
  <p></p><Br><Br>
  <ul class ="list">
  </ul>
  </div>

   <script>
    var url = 'http://localhost:6969';

    const user = {};

    document.querySelector('.send')
      .addEventListener('click', (ev) => {
        ev.preventDefault();
        
        let text = document.querySelector('.text').value;
        fetch(`${url}/search?text=${text}`, {
            method: 'GET', headers: { 'content-type': 'application/json', authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjoiZ3Vlc3QiLCJkYXRlIjoxNTU1Njg1Mjc4NzIyLCJpYXQiOjE1NTU2ODUyNzh9.ueENitneAkMoF7xKRxv6feb3Mh_TrcCBYDYU0MzZc_0'}
        }).then(function (response) {
          response.text().then(l => {
            let li = document.createElement('li');
            li.textContent = l;
            document.querySelector('.list').appendChild(li);
          })
        });
    })
   </script>

 </body>
</html>